knitr::opts_chunk$set(echo = TRUE)
library(tidyverse) # data manipulation
library(lingtypology) # drawing maps
# Load data
# 1. Village coordinates + languages
vill <- read_tsv("villages.csv")
# (take out some villages which do not have coordinates yet)
vill <- vill[complete.cases(vill$Lat),]
# 2. Color schemes
col <- read_tsv("colors.csv")
# 3. General (Glottolog) datapoints
glot <- read_tsv("glottolog_points.csv")
# Add colors
vill_col <- merge(vill, col, by = "Language")
glot_col <- merge(glot, col, by = "Language")
# Re-order the elements in the legend (by default they are in alphabetical order)
vill_col$Language <- factor(vill_col$Language, levels =c(
"Dargwa", "Lak", "Bats", "Ingush", "Chechen", "Khinalugh", "Archi", "Tsakhur", "Rutul", "Kryz", "Budukh", "Udi", "Lezgian", "Aghul", "Tabasaran", "Avar", "Andi", "Botlikh", "Godoberi", "Chamalal", "Bagvalal", "Tindi", "Karata", "Akhvakh", "Tsez", "Hinuq", "Bezhta", "Hunzib", "Xvarshi", "Armenian", "Kumyk", "Nogai", "North Azerbaijani"))
map.feature(vill_col$Language,
latitude = vill_col$Lat,
longitude = vill_col$Lon,
features = vill_col$Language,
color = vill_col$`Data color`,
label = vill_col$Language,
zoom.control = T,
popup = vill_col$Name,
tile = c("Esri.WorldTopoMap"))
vill_col$Group <- factor(vill_col$Group, levels =c("Dargwa", "Lak", "Nakh", "Khinalugh", "Lezgic", "Avar", "Andic", "Tsezic", "Armenian", "Kipchak", "West Oghuz"))
map.feature(vill_col$Language,
latitude = vill_col$Lat,
longitude = vill_col$Lon,
features = vill_col$Group,
width = 8,
label = vill_col$Language,
color = vill_col$`Group color`,
zoom.control = T,
popup = vill_col$Name,
tile = c("Esri.WorldTopoMap"))
map.feature(vill_col$Language,
latitude = vill_col$Lat,
longitude = vill_col$Lon,
features = vill_col$Lang,
width = 8, opacity = 0.7,
legend = F,
zoom.control = T,
label = vill_col$Language,
popup = vill_col$Name,
color = vill_col$`General color`) %>% # this pipe allows you to put a map on top of another map
map.feature(glot_col$Language,
latitude = glot_col$Lat,
longitude = glot_col$Lon,
features = glot_col$Language,
legend = F,
label = glot_col$Language,
color = glot_col$`Data color`,
zoom.control = T,
pipe.data = .)
glot_col$Language <- factor(glot_col$Language, levels =c(
"Dargwa", "Lak", "Bats", "Ingush", "Chechen", "Khinalugh", "Archi", "Tsakhur", "Rutul", "Kryz", "Budukh", "Udi", "Lezgian", "Aghul", "Tabasaran", "Avar", "Andi", "Botlikh", "Godoberi", "Chamalal", "Bagvalal", "Tindi", "Karata", "Akhvakh", "Tsez", "Hinuq", "Bezhta", "Hunzib", "Xvarshi"))
map.feature(glot_col$Language,
latitude = glot_col$Lat,
longitude = glot_col$Lon,
features = glot_col$Language,
width = 8,
label = glot_col$Language,
color = glot_col$`Data color`,
zoom.control = T,
zoom.level = 7,
popup = glot_col$Name,
tile = c("Esri.WorldGrayCanvas"))
map.feature()
map.feature(vill_col$Language,
latitude = vill_col$Lat,
longitude = vill_col$Lon,
features = vill_col$elevation)
map.feature(vill_col$Language,
latitude = vill_col$Lat,
longitude = vill_col$Lon,
features = vill_col$Language,
color = vill_col$`Data color`,
stroke.features = vill_col$elevation,
stroke.color = c("white", "black"))
map.feature(vill_col$Language,
latitude = vill_col$Lat,
longitude = vill_col$Lon,
features = vill_col$elevation,
popup = paste("<b>Village:</b>", vill_col$Name, "<br>",
"<b>Language:</b>", vill_col$Language))
map.feature(vill_col$Language,
latitude = vill_col$Lat,
longitude = vill_col$Lon,
features = vill_col$elevation,
popup = paste(vill_col$Name, ",", vill_col$elevation,
"<b>Language:</b>", vill_col$Language))
map.feature(vill_col$Language,
latitude = vill_col$Lat,
longitude = vill_col$Lon,
features = vill_col$elevation,
popup = paste(vill_col$Name, "(", vill_col$elevation, ")", "<br>",
"<b>Language:</b>", vill_col$Language))
map.feature(vill_col$Language,
latitude = vill_col$Lat,
longitude = vill_col$Lon,
features = vill_col$elevation,
popup = paste(vill_col$Name, vill_col$elevation, "m", "<br>",
"<b>Language:</b>", vill_col$Language))
map.feature(vill_col$Language,
latitude = vill_col$Lat,
longitude = vill_col$Lon,
features = vill_col$elevation,
popup = paste(vill_col$Name, "<br>", vill_col$elevation, "meters above sea-level", "<br>",
"<b>Language:</b>", vill_col$Language))
map.feature(vill_col$Language,
latitude = vill_col$Lat,
longitude = vill_col$Lon,
features = vill_col$elevation,
popup = paste(vill_col$Name, "<br>", vill_col$elevation, "(meters above sea-level)"))
# round off elevation to two decimals
vill_col %>%
mutate(elevation = round(elevation))
# map
map.feature(vill_col$Language,
latitude = vill_col$Lat,
longitude = vill_col$Lon,
features = vill_col$elevation,
popup = paste(vill_col$Name, "<br>", vill_col$elevation, "(meters above sea-level)"))
# round off elevation to two decimals
vill_col %>%
mutate(round = round(elevation))
# map
map.feature(vill_col$Language,
latitude = vill_col$Lat,
longitude = vill_col$Lon,
features = vill_col$elevation,
popup = paste(vill_col$Name, "<br>", vill_col$elevation, "(meters above sea-level)"))
# round off elevation to two decimals
vill_col %>%
mutate(round = round(elevation))
# map
map.feature(vill_col$Language,
latitude = vill_col$Lat,
longitude = vill_col$Lon,
features = vill_col$round,
popup = paste(vill_col$Name, "<br>", vill_col$elevation, "(meters above sea-level)"))
# round off elevation to two decimals
vill_col <- vill_col %>%
mutate(round = round(elevation))
# map
map.feature(vill_col$Language,
latitude = vill_col$Lat,
longitude = vill_col$Lon,
features = vill_col$round,
popup = paste(vill_col$Name, "<br>", vill_col$elevation, "(meters above sea-level)"))
# round off elevation to two decimals
vill_col <- vill_col %>%
mutate(round = round(elevation, 2))
# map
map.feature(vill_col$Language,
latitude = vill_col$Lat,
longitude = vill_col$Lon,
features = vill_col$round,
popup = paste(vill_col$Name, "<br>", vill_col$elevation, "(meters above sea-level)"))
View(vill_col)
r-lib/pillar
# round off elevation to two decimals
vill_col <- vill_col %>%
mutate(round = round(elevation, 2))
# draw map
map.feature(vill_col$Language,
latitude = vill_col$Lat,
longitude = vill_col$Lon,
features = vill_col$round,
popup = paste(vill_col$Name, "<br>", vill_col$elevation, "Meters above sea-level"))
# round off elevation to two decimals
vill_col <- vill_col %>%
mutate(round = round(elevation, 2))
# draw map
map.feature(vill_col$Language,
latitude = vill_col$Lat,
longitude = vill_col$Lon,
features = vill_col$round,
title = "Altitude",
popup = paste(vill_col$Name, "<br>", vill_col$elevation, "Meters above sea-level"))
# round off elevation to two decimals
vill_col <- vill_col %>%
mutate(round = round(elevation, 2))
# draw map
map.feature(vill_col$Language,
latitude = vill_col$Lat,
longitude = vill_col$Lon,
features = vill_col$round,
title = "Altitude",
popup = paste(vill_col$Name, "<br>", "Meters above sea-level:", vill_col$elevation))
